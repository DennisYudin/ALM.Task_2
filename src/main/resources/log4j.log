2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@3887cf88]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@3887cf88] after transaction
2021-11-05 12:45:13 DEBUG TicketDAOImpl:83 - Call method findAll()
2021-11-05 12:45:13 DEBUG TicketDAOImpl:104 - Call method buildSqlQuery()
2021-11-05 12:45:13 DEBUG TicketDAOImpl:115 - Call method buildSqlQueryWithPageable()
2021-11-05 12:45:13 DEBUG TicketDAOImpl:129 - Call method collectSqlQuery()
2021-11-05 12:45:13 DEBUG TicketDAOImpl:110 - SQL query is SELECT * FROM tickets ORDER BY event_name ASC LIMIT 2 OFFSET 0
2021-11-05 12:45:13 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT * FROM tickets ORDER BY event_name ASC LIMIT 2 OFFSET 0]
2021-11-05 12:45:13 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG TicketDAOImpl:94 - Tickets are [Ticket(id=3001, eventName=Basta, uniqueCode=987654321, creationDate=1986-02-18 02:30:00.0, status=cancelled, userId=2001, eventId=1001), Ticket(id=3000, eventName=Oxxxymiron concert, uniqueCode=123456789, creationDate=1992-02-17 20:45:00.0, status=actual, userId=2000, eventId=1000)]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@794b435f dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@32639b12, testMethod = findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithoutSortValue@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 25, missCount = 1]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 26, missCount = 1]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 27, missCount = 1]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithoutSortValue]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@38f2e97e] for JDBC transaction
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@38f2e97e] to manual commit
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 16 ms.
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@38f2e97e]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@38f2e97e] after transaction
2021-11-05 12:45:13 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@32639b12, testMethod = findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithoutSortValue@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:13 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@323659f8, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 28, missCount = 1]
2021-11-05 12:45:13 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@323659f8, testMethod = getById_ShouldReturnTicketById_WhenInputIsExistId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@1144a55a dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@323659f8, testMethod = getById_ShouldReturnTicketById_WhenInputIsExistId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 29, missCount = 1]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTables.sql]]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 30, missCount = 1]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 31, missCount = 1]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.getById_ShouldReturnTicketById_WhenInputIsExistId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@3e521715] for JDBC transaction
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@3e521715] to manual commit
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 53 ms.
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3000, 'Oxxxymiron concert', '123456789', '1992-02-17 20:45:00', 'actual', 2000, 1000)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3001, 'Basta', '987654321', '1986-02-18 02:30:00', 'cancelled', 2001, 1001)
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTables.sql] in 16 ms.
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@3e521715]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@3e521715] after transaction
2021-11-05 12:45:13 DEBUG TicketDAOImpl:59 - Call method getById() with id = 3000
2021-11-05 12:45:13 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 12:45:13 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM tickets WHERE ticket_id = ?]
2021-11-05 12:45:13 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG TicketDAOImpl:69 - Ticket is Ticket(id=3000, eventName=Oxxxymiron concert, uniqueCode=123456789, creationDate=1992-02-17 20:45:00.0, status=actual, userId=2000, eventId=1000)
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@ca66933 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@323659f8, testMethod = getById_ShouldReturnTicketById_WhenInputIsExistId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 32, missCount = 1]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 33, missCount = 1]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 34, missCount = 1]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.getById_ShouldReturnTicketById_WhenInputIsExistId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@4fa06f52] for JDBC transaction
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@4fa06f52] to manual commit
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 0 ms.
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@4fa06f52]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@4fa06f52] after transaction
2021-11-05 12:45:13 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@323659f8, testMethod = getById_ShouldReturnTicketById_WhenInputIsExistId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:13 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@5ffc5491, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 35, missCount = 1]
2021-11-05 12:45:13 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@5ffc5491, testMethod = save_ShouldUpdateExistedTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@705202d1 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@5ffc5491, testMethod = save_ShouldUpdateExistedTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 36, missCount = 1]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTables.sql]]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 37, missCount = 1]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 38, missCount = 1]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.save_ShouldUpdateExistedTicket_WhenInputIsTicketObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@3c443976] for JDBC transaction
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@3c443976] to manual commit
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 62 ms.
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3000, 'Oxxxymiron concert', '123456789', '1992-02-17 20:45:00', 'actual', 2000, 1000)
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3001, 'Basta', '987654321', '1986-02-18 02:30:00', 'cancelled', 2001, 1001)
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTables.sql] in 7 ms.
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@3c443976]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@3c443976] after transaction
2021-11-05 12:45:13 DEBUG TicketDAOImpl:145 - Call method save()
2021-11-05 12:45:13 DEBUG TicketDAOImpl:59 - Call method getById() with id = 3000
2021-11-05 12:45:13 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 12:45:13 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM tickets WHERE ticket_id = ?]
2021-11-05 12:45:13 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG TicketDAOImpl:69 - Ticket is Ticket(id=3000, eventName=Oxxxymiron concert, uniqueCode=123456789, creationDate=1992-02-17 20:45:00.0, status=actual, userId=2000, eventId=1000)
2021-11-05 12:45:13 DEBUG TicketDAOImpl:177 - Call method updateTicket()
2021-11-05 12:45:13 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 12:45:13 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [UPDATE tickets SET event_name = ?, unique_number = ?, creation_date = ?, status = ?, user_id = ?, event_id = ? WHERE ticket_id = ?]
2021-11-05 12:45:13 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 12:45:13 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT ticket_id FROM tickets WHERE event_name = ? AND unique_number = ? AND creation_date = ? AND status = ? AND user_id = ? AND event_id = ?]
2021-11-05 12:45:13 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@62a8fd44 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@5ffc5491, testMethod = save_ShouldUpdateExistedTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 39, missCount = 1]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 40, missCount = 1]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 41, missCount = 1]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.save_ShouldUpdateExistedTicket_WhenInputIsTicketObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@2e6ba49a] for JDBC transaction
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@2e6ba49a] to manual commit
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 16 ms.
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@2e6ba49a]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@2e6ba49a] after transaction
2021-11-05 12:45:13 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@5ffc5491, testMethod = save_ShouldUpdateExistedTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:13 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@4ee33af7, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 42, missCount = 1]
2021-11-05 12:45:13 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@4ee33af7, testMethod = save_ShouldSaveTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@18388a3c dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@4ee33af7, testMethod = save_ShouldSaveTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 43, missCount = 1]
2021-11-05 12:45:13 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTables.sql]]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 44, missCount = 1]
2021-11-05 12:45:13 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:13 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 45, missCount = 1]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.save_ShouldSaveTicket_WhenInputIsTicketObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:13 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@1d035be3] for JDBC transaction
2021-11-05 12:45:13 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@1d035be3] to manual commit
2021-11-05 12:45:13 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 12:45:13 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:13 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 62 ms.
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3000, 'Oxxxymiron concert', '123456789', '1992-02-17 20:45:00', 'actual', 2000, 1000)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3001, 'Basta', '987654321', '1986-02-18 02:30:00', 'cancelled', 2001, 1001)
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTables.sql] in 6 ms.
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@1d035be3]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@1d035be3] after transaction
2021-11-05 12:45:14 DEBUG TicketDAOImpl:145 - Call method save()
2021-11-05 12:45:14 DEBUG TicketDAOImpl:59 - Call method getById() with id = 3002
2021-11-05 12:45:14 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 12:45:14 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM tickets WHERE ticket_id = ?]
2021-11-05 12:45:14 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 ERROR TicketDAOImpl:73 - There is no such ticket with id = 3002
2021-11-05 12:45:14 DEBUG TicketDAOImpl:155 - Call method saveTicket()
2021-11-05 12:45:14 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 12:45:14 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id)VALUES (?, ?, ?, ?, ?, ?, ?)]
2021-11-05 12:45:14 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 12:45:14 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT ticket_id FROM tickets WHERE event_name = ? AND unique_number = ? AND creation_date = ? AND status = ? AND user_id = ? AND event_id = ?]
2021-11-05 12:45:14 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@3249a1ce dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@4ee33af7, testMethod = save_ShouldSaveTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 46, missCount = 1]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 47, missCount = 1]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 48, missCount = 1]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.save_ShouldSaveTicket_WhenInputIsTicketObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@4dd94a58] for JDBC transaction
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@4dd94a58] to manual commit
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 0 ms.
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@4dd94a58]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@4dd94a58] after transaction
2021-11-05 12:45:14 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@4ee33af7, testMethod = save_ShouldSaveTicket_WhenInputIsTicketObjectWithDetails@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:14 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@a8a8b75, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 49, missCount = 1]
2021-11-05 12:45:14 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@a8a8b75, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@75b21c3b dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@a8a8b75, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 50, missCount = 1]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTables.sql]]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 51, missCount = 1]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 52, missCount = 1]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@72be135f] for JDBC transaction
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@72be135f] to manual commit
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 38 ms.
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3000, 'Oxxxymiron concert', '123456789', '1992-02-17 20:45:00', 'actual', 2000, 1000)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3001, 'Basta', '987654321', '1986-02-18 02:30:00', 'cancelled', 2001, 1001)
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTables.sql] in 31 ms.
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@72be135f]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@72be135f] after transaction
2021-11-05 12:45:14 DEBUG TicketDAOImpl:59 - Call method getById() with id = -1
2021-11-05 12:45:14 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 12:45:14 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM tickets WHERE ticket_id = ?]
2021-11-05 12:45:14 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 ERROR TicketDAOImpl:73 - There is no such ticket with id = -1
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@49b07ee3 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@a8a8b75, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 53, missCount = 1]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 54, missCount = 1]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 55, missCount = 1]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@65f00478] for JDBC transaction
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@65f00478] to manual commit
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 16 ms.
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@65f00478]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@65f00478] after transaction
2021-11-05 12:45:14 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@a8a8b75, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:14 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@6ea94d6a, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 56, missCount = 1]
2021-11-05 12:45:14 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@6ea94d6a, testMethod = findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithSortValue@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@28486680 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@6ea94d6a, testMethod = findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithSortValue@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 57, missCount = 1]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTables.sql]]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 58, missCount = 1]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 59, missCount = 1]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithSortValue]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@4d7e7435] for JDBC transaction
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@4d7e7435] to manual commit
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 63 ms.
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3000, 'Oxxxymiron concert', '123456789', '1992-02-17 20:45:00', 'actual', 2000, 1000)
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO tickets (ticket_id, event_name, unique_number, creation_date, status, user_id, event_id) VALUES (3001, 'Basta', '987654321', '1986-02-18 02:30:00', 'cancelled', 2001, 1001)
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTables.sql] in 15 ms.
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@4d7e7435]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@4d7e7435] after transaction
2021-11-05 12:45:14 DEBUG TicketDAOImpl:83 - Call method findAll()
2021-11-05 12:45:14 DEBUG TicketDAOImpl:104 - Call method buildSqlQuery()
2021-11-05 12:45:14 DEBUG TicketDAOImpl:115 - Call method buildSqlQueryWithPageable()
2021-11-05 12:45:14 DEBUG TicketDAOImpl:129 - Call method collectSqlQuery()
2021-11-05 12:45:14 DEBUG TicketDAOImpl:110 - SQL query is SELECT * FROM tickets ORDER BY ticket_id ASC LIMIT 2 OFFSET 0
2021-11-05 12:45:14 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT * FROM tickets ORDER BY ticket_id ASC LIMIT 2 OFFSET 0]
2021-11-05 12:45:14 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG TicketDAOImpl:94 - Tickets are [Ticket(id=3000, eventName=Oxxxymiron concert, uniqueCode=123456789, creationDate=1992-02-17 20:45:00.0, status=actual, userId=2000, eventId=1000), Ticket(id=3001, eventName=Basta, uniqueCode=987654321, creationDate=1986-02-18 02:30:00.0, status=cancelled, userId=2001, eventId=1001)]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@56febdc dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@6ea94d6a, testMethod = findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithSortValue@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 60, missCount = 1]
2021-11-05 12:45:14 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 61, missCount = 1]
2021-11-05 12:45:14 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 12:45:14 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@552518c3 size = 1, maxSize = 32, parentContextCount = 0, hitCount = 62, missCount = 1]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.TicketDAOImplTest.findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithSortValue]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 12:45:14 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@3b8ee898] for JDBC transaction
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@3b8ee898] to manual commit
2021-11-05 12:45:14 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 12:45:14 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 0 ms.
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@3b8ee898]
2021-11-05 12:45:14 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@3b8ee898] after transaction
2021-11-05 12:45:14 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.TicketDAOImplTest@6ea94d6a, testMethod = findAll_ShouldReturnAllTicketsSortedByEventName_WhenInputIsPageRequestWithSortValue@TicketDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:14 DEBUG AbstractDirtiesContextTestExecutionListener:142 - After test class: context [DefaultTestContext@1787f2a0 testClass = TicketDAOImplTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@7de62196 testClass = TicketDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].
2021-11-05 12:45:14 INFO  GenericApplicationContext:989 - Closing org.springframework.context.support.GenericApplicationContext@7a3793c7: startup date [Fri Nov 05 12:45:11 MSK 2021]; root of context hierarchy
2021-11-05 13:02:23 DEBUG BootstrapUtils:97 - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]
2021-11-05 13:02:23 DEBUG BootstrapUtils:80 - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]
2021-11-05 13:02:23 DEBUG BootstrapUtils:133 - Instantiating TestContextBootstrapper for test class [dev.andrylat.task2.dao.impl.UserDAOImplTest] from class [org.springframework.test.context.support.DefaultTestContextBootstrapper]
2021-11-05 13:02:23 DEBUG AbstractDelegatingSmartContextLoader:97 - Delegating to AnnotationConfigContextLoader to process context configuration [ContextConfigurationAttributes@34bde49d declaringClass = 'dev.andrylat.task2.dao.impl.UserDAOImplTest', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', locations = '{}', inheritLocations = true, initializers = '{}', inheritInitializers = true, name = [null], contextLoaderClass = 'org.springframework.test.context.ContextLoader'].
2021-11-05 13:02:23 DEBUG ActiveProfilesUtils:79 - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [dev.andrylat.task2.dao.impl.UserDAOImplTest]
2021-11-05 13:02:23 DEBUG DefaultTestContextBootstrapper:129 - @TestExecutionListeners is not present for class [dev.andrylat.task2.dao.impl.UserDAOImplTest]: using defaults.
2021-11-05 13:02:23 INFO  DefaultTestContextBootstrapper:257 - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2021-11-05 13:02:23 INFO  DefaultTestContextBootstrapper:184 - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1cf56a1c, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@33f676f6, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@4c5ae43b, org.springframework.test.context.support.DirtiesContextTestExecutionListener@264f218, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3576ddc2, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@35b74c5c]
2021-11-05 13:02:23 DEBUG AbstractDirtiesContextTestExecutionListener:142 - Before test class: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:23 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@3b5fad2d, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:23 DEBUG AbstractDelegatingSmartContextLoader:107 - Delegating to AnnotationConfigContextLoader to load context from [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]].
2021-11-05 13:02:23 DEBUG AbstractGenericContextLoader:109 - Loading ApplicationContext for merged context configuration [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]].
2021-11-05 13:02:23 DEBUG StandardEnvironment:296 - Activating profiles []
2021-11-05 13:02:23 DEBUG AnnotationConfigContextLoader:192 - Registering annotated classes: {class dev.andrylat.task2.configs.AppConfigTest}
2021-11-05 13:02:23 INFO  GenericApplicationContext:589 - Refreshing org.springframework.context.support.GenericApplicationContext@295cf707: startup date [Fri Nov 05 13:02:23 MSK 2021]; root of context hierarchy
2021-11-05 13:02:23 DEBUG GenericApplicationContext:623 - Bean factory for org.springframework.context.support.GenericApplicationContext@295cf707: org.springframework.beans.factory.support.DefaultListableBeanFactory@1b75c2e3: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.event.internalEventListenerProcessor,org.springframework.context.event.internalEventListenerFactory,appConfigTest]; root of factory hierarchy
2021-11-05 13:02:23 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\configs\AppConfig.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\controllers\DemoController.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\CategoryDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\EventDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\LocationDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\TicketDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\UserDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dto\mapper\EventMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\CategoryRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\EventRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\LocationRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\TicketRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\UserRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\CategoryServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\EventServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\LocationServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\TicketServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\UserServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\test-classes\dev\andrylat\task2\configs\AppConfigTest.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\controllers\DemoController.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\CategoryDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\EventDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\LocationDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\TicketDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dao\impl\UserDAOImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\dto\mapper\EventMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\CategoryRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\EventRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\LocationRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\TicketRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\mappers\UserRowMapper.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\CategoryServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\EventServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\LocationServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\TicketServiceImpl.class]
2021-11-05 13:02:24 DEBUG ClassPathBeanDefinitionScanner:437 - Identified candidate component class: file [C:\workspace\ALM.Task_2\target\classes\dev\andrylat\task2\services\impl\UserServiceImpl.class]
2021-11-05 13:02:24 DEBUG ConfigurationClassBeanDefinitionReader:263 - Registering bean definition for @Bean method dev.andrylat.task2.configs.AppConfig.viewResolver()
2021-11-05 13:02:24 DEBUG ConfigurationClassBeanDefinitionReader:263 - Registering bean definition for @Bean method dev.andrylat.task2.configs.AppConfig.dataSource()
2021-11-05 13:02:24 DEBUG ConfigurationClassBeanDefinitionReader:263 - Registering bean definition for @Bean method dev.andrylat.task2.configs.AppConfig.JdbcTemplate()
2021-11-05 13:02:24 DEBUG ConfigurationClassBeanDefinitionReader:263 - Registering bean definition for @Bean method dev.andrylat.task2.configs.AppConfigTest.dataSource()
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:1007 - Overriding bean definition for bean 'dataSource' with a different definition: replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=dataSource; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [dev/andrylat/task2/configs/AppConfig.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfigTest; factoryMethodName=dataSource; initMethodName=null; destroyMethodName=(inferred); defined in dev.andrylat.task2.configs.AppConfigTest]
2021-11-05 13:02:24 DEBUG ConfigurationClassBeanDefinitionReader:263 - Registering bean definition for @Bean method dev.andrylat.task2.configs.AppConfigTest.JdbcTemplate()
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:1007 - Overriding bean definition for bean 'JdbcTemplate' with a different definition: replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=JdbcTemplate; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [dev/andrylat/task2/configs/AppConfig.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfigTest; factoryMethodName=JdbcTemplate; initMethodName=null; destroyMethodName=(inferred); defined in dev.andrylat.task2.configs.AppConfigTest]
2021-11-05 13:02:24 DEBUG ConfigurationClassBeanDefinitionReader:263 - Registering bean definition for @Bean method dev.andrylat.task2.configs.AppConfigTest.transactionManager()
2021-11-05 13:02:24 DEBUG ConfigurationClassEnhancer:112 - Successfully enhanced dev.andrylat.task2.configs.AppConfigTest; enhanced class name is: dev.andrylat.task2.configs.AppConfigTest$$EnhancerBySpringCGLIB$$40fdb3a5
2021-11-05 13:02:24 DEBUG ConfigurationClassPostProcessor:408 - Replacing bean definition 'appConfigTest' existing class 'dev.andrylat.task2.configs.AppConfigTest' with enhanced class 'dev.andrylat.task2.configs.AppConfigTest$$EnhancerBySpringCGLIB$$40fdb3a5'
2021-11-05 13:02:24 DEBUG ConfigurationClassEnhancer:112 - Successfully enhanced dev.andrylat.task2.configs.AppConfig; enhanced class name is: dev.andrylat.task2.configs.AppConfig$$EnhancerBySpringCGLIB$$c18af33
2021-11-05 13:02:24 DEBUG ConfigurationClassPostProcessor:408 - Replacing bean definition 'appConfig' existing class 'dev.andrylat.task2.configs.AppConfig' with enhanced class 'dev.andrylat.task2.configs.AppConfig$$EnhancerBySpringCGLIB$$c18af33'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalAutowiredAnnotationProcessor'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'org.springframework.context.annotation.internalRequiredAnnotationProcessor'
2021-11-05 13:02:24 DEBUG GenericApplicationContext:740 - Unable to locate MessageSource with name 'messageSource': using default [org.springframework.context.support.DelegatingMessageSource@3f053c80]
2021-11-05 13:02:24 DEBUG GenericApplicationContext:764 - Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@64dafeed]
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerProcessor'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'org.springframework.context.event.internalEventListenerFactory'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'appConfigTest'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'appConfig'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'demoController'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'categoryDAO'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'JdbcTemplate'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'dataSource'
2021-11-05 13:02:24 DEBUG PropertySourcesPropertyResolver:115 - Found key 'jdbc.driver.test' in PropertySource 'class path resource [test-postgresql.properties]' with value of type String
2021-11-05 13:02:24 DEBUG PropertySourcesPropertyResolver:115 - Found key 'jdbc.url.test' in PropertySource 'class path resource [test-postgresql.properties]' with value of type String
2021-11-05 13:02:24 DEBUG PropertySourcesPropertyResolver:115 - Found key 'jdbc.user.test' in PropertySource 'class path resource [test-postgresql.properties]' with value of type String
2021-11-05 13:02:24 DEBUG PropertySourcesPropertyResolver:115 - Found key 'jdbc.password.test' in PropertySource 'class path resource [test-postgresql.properties]' with value of type String
2021-11-05 13:02:24 DEBUG DriverManagerDataSource:134 - Loaded JDBC driver: org.postgresql.Driver
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:808 - Autowiring by type from bean name 'categoryDAO' via constructor to bean named 'JdbcTemplate'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'categoryRowMapper'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'eventDAO'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:808 - Autowiring by type from bean name 'eventDAO' via constructor to bean named 'JdbcTemplate'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'eventRowMapper'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'locationDAO'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:808 - Autowiring by type from bean name 'locationDAO' via constructor to bean named 'JdbcTemplate'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'locationRowMapper'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'ticketDAO'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:808 - Autowiring by type from bean name 'ticketDAO' via constructor to bean named 'JdbcTemplate'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'ticketRowMapper'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'userDAO'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:808 - Autowiring by type from bean name 'userDAO' via constructor to bean named 'JdbcTemplate'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'userRowMapper'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'eventMapper'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'categoryServiceImpl'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'eventServiceImpl'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'locationServiceImpl'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'ticketServiceImpl'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'userServiceImpl'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'viewResolver'
2021-11-05 13:02:24 DEBUG DefaultListableBeanFactory:225 - Creating shared instance of singleton bean 'transactionManager'
2021-11-05 13:02:24 DEBUG GenericApplicationContext:791 - Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@22c86919]
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:119 - Storing ApplicationContext in cache under key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 0, missCount = 1]
2021-11-05 13:02:24 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@3b5fad2d, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenPageIsNull@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:24 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@a50b09c dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@3b5fad2d, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenPageIsNull@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 1, missCount = 1]
2021-11-05 13:02:24 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 2, missCount = 1]
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 3, missCount = 1]
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnAllUsersSortedByName_WhenPageIsNull]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:24 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@13c612bd] for JDBC transaction
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@13c612bd] to manual commit
2021-11-05 13:02:24 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:24 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:24 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 85 ms.
2021-11-05 13:02:24 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:24 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:24 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 16 ms.
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@13c612bd]
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@13c612bd] after transaction
2021-11-05 13:02:24 DEBUG UserDAOImpl:98 - Call method findAll()
2021-11-05 13:02:24 DEBUG UserDAOImpl:119 - Call method buildSqlQuery()
2021-11-05 13:02:24 DEBUG UserDAOImpl:125 - SQL query is SELECT * FROM users ORDER BY name
2021-11-05 13:02:24 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT * FROM users ORDER BY name]
2021-11-05 13:02:24 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:24 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:24 DEBUG UserDAOImpl:109 - Users are [User(id=2000, name=Dennis, surname=Yudin, email=dennisYudin@mail.ru, login=Big boss, password=0000, type=customer), User(id=2001, name=Mark, surname=Batmanov, email=redDragon@mail.ru, login=HelloWorld, password=1234, type=customer)]
2021-11-05 13:02:24 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@5c09d180 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@3b5fad2d, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenPageIsNull@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 4, missCount = 1]
2021-11-05 13:02:24 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]
2021-11-05 13:02:24 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:24 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]
2021-11-05 13:02:24 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnAllUsersSortedByName_WhenPageIsNull]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:24 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@23aae55] for JDBC transaction
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@23aae55] to manual commit
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 20 ms.
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@23aae55]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@23aae55] after transaction
2021-11-05 13:02:25 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@3b5fad2d, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenPageIsNull@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:25 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@2f19f2aa, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 7, missCount = 1]
2021-11-05 13:02:25 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@2f19f2aa, testMethod = removeEvent_ShouldDeleteEvent_WhenInputIsUserIdIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@6a078481 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@2f19f2aa, testMethod = removeEvent_ShouldDeleteEvent_WhenInputIsUserIdIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 8, missCount = 1]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 9, missCount = 1]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 10, missCount = 1]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.removeEvent_ShouldDeleteEvent_WhenInputIsUserIdIdAndEventId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@79c5636f] for JDBC transaction
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@79c5636f] to manual commit
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 60 ms.
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 21 ms.
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@79c5636f]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@79c5636f] after transaction
2021-11-05 13:02:25 DEBUG UserDAOImpl:303 - Call method removeEvent()
2021-11-05 13:02:25 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 13:02:25 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [DELETE FROM event_subscriptions WHERE user_id = ? AND event_id = ?]
2021-11-05 13:02:25 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:25 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT event_id FROM event_subscriptions WHERE user_id = ?]
2021-11-05 13:02:25 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@36074e47 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@2f19f2aa, testMethod = removeEvent_ShouldDeleteEvent_WhenInputIsUserIdIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 11, missCount = 1]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 12, missCount = 1]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 13, missCount = 1]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.removeEvent_ShouldDeleteEvent_WhenInputIsUserIdIdAndEventId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@36453307] for JDBC transaction
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@36453307] to manual commit
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 15 ms.
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@36453307]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@36453307] after transaction
2021-11-05 13:02:25 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@2f19f2aa, testMethod = removeEvent_ShouldDeleteEvent_WhenInputIsUserIdIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:25 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@66eb985d, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 14, missCount = 1]
2021-11-05 13:02:25 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@66eb985d, testMethod = save_ShouldUpdateExistedUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@6a9287b1 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@66eb985d, testMethod = save_ShouldUpdateExistedUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 15, missCount = 1]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 16, missCount = 1]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 17, missCount = 1]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.save_ShouldUpdateExistedUser_WhenInputIsUserObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@75504cef] for JDBC transaction
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@75504cef] to manual commit
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 47 ms.
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 16 ms.
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@75504cef]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@75504cef] after transaction
2021-11-05 13:02:25 DEBUG UserDAOImpl:160 - Call method save()
2021-11-05 13:02:25 DEBUG UserDAOImpl:74 - Call method getById() with id = 2000
2021-11-05 13:02:25 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:25 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ?]
2021-11-05 13:02:25 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG UserDAOImpl:84 - User is User(id=2000, name=Dennis, surname=Yudin, email=dennisYudin@mail.ru, login=Big boss, password=0000, type=customer)
2021-11-05 13:02:25 DEBUG UserDAOImpl:192 - Call method updateUser()
2021-11-05 13:02:25 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 13:02:25 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [UPDATE users SET name = ?, surname = ?, email = ?, login = ?, password = ?, type = ? WHERE user_id = ?]
2021-11-05 13:02:25 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:25 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT user_id FROM users WHERE name = ? AND surname = ? AND email = ? AND login = ? AND password = ? AND type = ?]
2021-11-05 13:02:25 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@29d37757 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@66eb985d, testMethod = save_ShouldUpdateExistedUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 18, missCount = 1]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 19, missCount = 1]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 20, missCount = 1]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.save_ShouldUpdateExistedUser_WhenInputIsUserObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@4fcc529] for JDBC transaction
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@4fcc529] to manual commit
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 10 ms.
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@4fcc529]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@4fcc529] after transaction
2021-11-05 13:02:25 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@66eb985d, testMethod = save_ShouldUpdateExistedUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:25 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@4beddc56, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 21, missCount = 1]
2021-11-05 13:02:25 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@4beddc56, testMethod = findAll_ShouldReturnAllUsersSortedBySurname_WhenInputIsPageRequestWithSortValue@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@79b663b3 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@4beddc56, testMethod = findAll_ShouldReturnAllUsersSortedBySurname_WhenInputIsPageRequestWithSortValue@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 22, missCount = 1]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 23, missCount = 1]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 24, missCount = 1]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnAllUsersSortedBySurname_WhenInputIsPageRequestWithSortValue]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@1b812421] for JDBC transaction
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@1b812421] to manual commit
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:25 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 52 ms.
2021-11-05 13:02:25 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:25 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:25 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 19 ms.
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@1b812421]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@1b812421] after transaction
2021-11-05 13:02:25 DEBUG UserDAOImpl:98 - Call method findAll()
2021-11-05 13:02:25 DEBUG UserDAOImpl:119 - Call method buildSqlQuery()
2021-11-05 13:02:25 DEBUG UserDAOImpl:130 - Call method buildSqlQueryWithPageable()
2021-11-05 13:02:25 DEBUG UserDAOImpl:144 - Call method collectSqlQuery()
2021-11-05 13:02:25 DEBUG UserDAOImpl:125 - SQL query is SELECT * FROM users ORDER BY surname ASC LIMIT 2 OFFSET 0
2021-11-05 13:02:25 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT * FROM users ORDER BY surname ASC LIMIT 2 OFFSET 0]
2021-11-05 13:02:25 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:25 DEBUG UserDAOImpl:109 - Users are [User(id=2001, name=Mark, surname=Batmanov, email=redDragon@mail.ru, login=HelloWorld, password=1234, type=customer), User(id=2000, name=Dennis, surname=Yudin, email=dennisYudin@mail.ru, login=Big boss, password=0000, type=customer)]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@2228db21 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@4beddc56, testMethod = findAll_ShouldReturnAllUsersSortedBySurname_WhenInputIsPageRequestWithSortValue@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 25, missCount = 1]
2021-11-05 13:02:25 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 26, missCount = 1]
2021-11-05 13:02:25 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:25 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 27, missCount = 1]
2021-11-05 13:02:25 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnAllUsersSortedBySurname_WhenInputIsPageRequestWithSortValue]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:25 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@48b0e701] for JDBC transaction
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@48b0e701] to manual commit
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 16 ms.
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@48b0e701]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@48b0e701] after transaction
2021-11-05 13:02:26 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@4beddc56, testMethod = findAll_ShouldReturnAllUsersSortedBySurname_WhenInputIsPageRequestWithSortValue@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:26 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@547c04c4, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 28, missCount = 1]
2021-11-05 13:02:26 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@547c04c4, testMethod = save_ShouldSaveNewUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@30e92cb9 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@547c04c4, testMethod = save_ShouldSaveNewUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 29, missCount = 1]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 30, missCount = 1]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 31, missCount = 1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.save_ShouldSaveNewUser_WhenInputIsUserObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@ba1f559] for JDBC transaction
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@ba1f559] to manual commit
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 63 ms.
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 6 ms.
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@ba1f559]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@ba1f559] after transaction
2021-11-05 13:02:26 DEBUG UserDAOImpl:160 - Call method save()
2021-11-05 13:02:26 DEBUG UserDAOImpl:74 - Call method getById() with id = 2002
2021-11-05 13:02:26 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ?]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 ERROR UserDAOImpl:88 - There is no such user with id = 2002
2021-11-05 13:02:26 DEBUG UserDAOImpl:170 - Call method saveUser()
2021-11-05 13:02:26 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (?, ?, ?, ?, ?, ?, ?)]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT user_id FROM users WHERE name = ? AND surname = ? AND email = ? AND login = ? AND password = ? AND type = ?]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@3c443976 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@547c04c4, testMethod = save_ShouldSaveNewUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 32, missCount = 1]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 33, missCount = 1]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 34, missCount = 1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.save_ShouldSaveNewUser_WhenInputIsUserObjectWithDetails]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@3e58d65e] for JDBC transaction
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@3e58d65e] to manual commit
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 16 ms.
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@3e58d65e]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@3e58d65e] after transaction
2021-11-05 13:02:26 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@547c04c4, testMethod = save_ShouldSaveNewUser_WhenInputIsUserObjectWithDetails@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:26 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@63998bf4, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 35, missCount = 1]
2021-11-05 13:02:26 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@63998bf4, testMethod = addNewEvent_ShouldAddNewEvent_WhenInputIsUserIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@7e0b9178 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@63998bf4, testMethod = addNewEvent_ShouldAddNewEvent_WhenInputIsUserIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 36, missCount = 1]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 37, missCount = 1]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 38, missCount = 1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.addNewEvent_ShouldAddNewEvent_WhenInputIsUserIdAndEventId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@61942c1] for JDBC transaction
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@61942c1] to manual commit
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 54 ms.
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 15 ms.
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@61942c1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@61942c1] after transaction
2021-11-05 13:02:26 DEBUG UserDAOImpl:288 - Call method addNewEvent()
2021-11-05 13:02:26 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [INSERT INTO event_subscriptions (user_id, event_id) VALUES (?, ?)]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT event_id FROM event_subscriptions WHERE user_id = ? AND event_id = ?]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@408a247c dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@63998bf4, testMethod = addNewEvent_ShouldAddNewEvent_WhenInputIsUserIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 39, missCount = 1]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 40, missCount = 1]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 41, missCount = 1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.addNewEvent_ShouldAddNewEvent_WhenInputIsUserIdAndEventId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@62a8fd44] for JDBC transaction
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@62a8fd44] to manual commit
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 22 ms.
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@62a8fd44]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@62a8fd44] after transaction
2021-11-05 13:02:26 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@63998bf4, testMethod = addNewEvent_ShouldAddNewEvent_WhenInputIsUserIdAndEventId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:26 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@5f5b5ca4, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 42, missCount = 1]
2021-11-05 13:02:26 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@5f5b5ca4, testMethod = getAllEventsByUserId_ShouldReturnAllEvents_WhenInputIsUserId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@6b04acb2 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@5f5b5ca4, testMethod = getAllEventsByUserId_ShouldReturnAllEvents_WhenInputIsUserId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 43, missCount = 1]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 44, missCount = 1]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 45, missCount = 1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.getAllEventsByUserId_ShouldReturnAllEvents_WhenInputIsUserId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@18388a3c] for JDBC transaction
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@18388a3c] to manual commit
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:26 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 47 ms.
2021-11-05 13:02:26 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:26 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:26 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 16 ms.
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@18388a3c]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@18388a3c] after transaction
2021-11-05 13:02:26 DEBUG UserDAOImpl:229 - Call method getAllEventsByUserId()
2021-11-05 13:02:26 DEBUG UserDAOImpl:255 - Call method getEventIDs()
2021-11-05 13:02:26 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT event_id FROM event_subscriptions WHERE user_id = ?]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG UserDAOImpl:242 - Call method convertToNames()
2021-11-05 13:02:26 DEBUG UserDAOImpl:272 - Call method getEventNames()
2021-11-05 13:02:26 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:26 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT name FROM events WHERE event_id = ?]
2021-11-05 13:02:26 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:26 DEBUG UserDAOImpl:236 - Events are [Oxxxymiron concert]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@5f212d84 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@5f5b5ca4, testMethod = getAllEventsByUserId_ShouldReturnAllEvents_WhenInputIsUserId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 46, missCount = 1]
2021-11-05 13:02:26 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 47, missCount = 1]
2021-11-05 13:02:26 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:26 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 48, missCount = 1]
2021-11-05 13:02:26 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.getAllEventsByUserId_ShouldReturnAllEvents_WhenInputIsUserId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:26 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@127d7908] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@127d7908] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 1 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@127d7908]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@127d7908] after transaction
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@5f5b5ca4, testMethod = getAllEventsByUserId_ShouldReturnAllEvents_WhenInputIsUserId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@6622a690, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 49, missCount = 1]
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@6622a690, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenInputIsPageRequestWithoutSort@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@30b9eadd dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@6622a690, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenInputIsPageRequestWithoutSort@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 50, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 51, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 52, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnAllUsersSortedByName_WhenInputIsPageRequestWithoutSort]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@497570fb] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@497570fb] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 47 ms.
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 19 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@497570fb]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@497570fb] after transaction
2021-11-05 13:02:27 DEBUG UserDAOImpl:98 - Call method findAll()
2021-11-05 13:02:27 DEBUG UserDAOImpl:119 - Call method buildSqlQuery()
2021-11-05 13:02:27 DEBUG UserDAOImpl:130 - Call method buildSqlQueryWithPageable()
2021-11-05 13:02:27 DEBUG UserDAOImpl:144 - Call method collectSqlQuery()
2021-11-05 13:02:27 DEBUG UserDAOImpl:125 - SQL query is SELECT * FROM users ORDER BY name ASC LIMIT 2 OFFSET 0
2021-11-05 13:02:27 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT * FROM users ORDER BY name ASC LIMIT 2 OFFSET 0]
2021-11-05 13:02:27 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG UserDAOImpl:109 - Users are [User(id=2000, name=Dennis, surname=Yudin, email=dennisYudin@mail.ru, login=Big boss, password=0000, type=customer), User(id=2001, name=Mark, surname=Batmanov, email=redDragon@mail.ru, login=HelloWorld, password=1234, type=customer)]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@2c42b421 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@6622a690, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenInputIsPageRequestWithoutSort@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 53, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 54, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 55, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnAllUsersSortedByName_WhenInputIsPageRequestWithoutSort]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@deb3b60] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@deb3b60] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 11 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@deb3b60]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@deb3b60] after transaction
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@6622a690, testMethod = findAll_ShouldReturnAllUsersSortedByName_WhenInputIsPageRequestWithoutSort@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@39aa45a1, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 56, missCount = 1]
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@39aa45a1, testMethod = findAll_ShouldReturnOneUsersSortedByName_WhenInputIsPageWithSizeOne@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@73aff8f1 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@39aa45a1, testMethod = findAll_ShouldReturnOneUsersSortedByName_WhenInputIsPageWithSizeOne@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 57, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 58, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 59, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnOneUsersSortedByName_WhenInputIsPageWithSizeOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@27cbfddf] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@27cbfddf] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 46 ms.
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 16 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@27cbfddf]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@27cbfddf] after transaction
2021-11-05 13:02:27 DEBUG UserDAOImpl:98 - Call method findAll()
2021-11-05 13:02:27 DEBUG UserDAOImpl:119 - Call method buildSqlQuery()
2021-11-05 13:02:27 DEBUG UserDAOImpl:130 - Call method buildSqlQueryWithPageable()
2021-11-05 13:02:27 DEBUG UserDAOImpl:144 - Call method collectSqlQuery()
2021-11-05 13:02:27 DEBUG UserDAOImpl:125 - SQL query is SELECT * FROM users ORDER BY name ASC LIMIT 1 OFFSET 0
2021-11-05 13:02:27 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT * FROM users ORDER BY name ASC LIMIT 1 OFFSET 0]
2021-11-05 13:02:27 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG UserDAOImpl:109 - Users are [User(id=2000, name=Dennis, surname=Yudin, email=dennisYudin@mail.ru, login=Big boss, password=0000, type=customer)]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@4c060c8f dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@39aa45a1, testMethod = findAll_ShouldReturnOneUsersSortedByName_WhenInputIsPageWithSizeOne@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 60, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 61, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 62, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.findAll_ShouldReturnOneUsersSortedByName_WhenInputIsPageWithSizeOne]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@40620d8e] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@40620d8e] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 15 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@40620d8e]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@40620d8e] after transaction
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@39aa45a1, testMethod = findAll_ShouldReturnOneUsersSortedByName_WhenInputIsPageWithSizeOne@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@49b07ee3, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 63, missCount = 1]
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@49b07ee3, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@352e612e dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@49b07ee3, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 64, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 65, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 66, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@65f00478] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@65f00478] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 38 ms.
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 15 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@65f00478]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@65f00478] after transaction
2021-11-05 13:02:27 DEBUG UserDAOImpl:74 - Call method getById() with id = -1
2021-11-05 13:02:27 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:27 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ?]
2021-11-05 13:02:27 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 ERROR UserDAOImpl:88 - There is no such user with id = -1
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@6e78fcf5 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@49b07ee3, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 67, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 68, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 69, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@56febdc] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@56febdc] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 15 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@56febdc]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@56febdc] after transaction
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@49b07ee3, testMethod = getById_ShouldThrowDataNotFoundException_WhenInputIsIncorrectId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7d151a, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 70, missCount = 1]
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7d151a, testMethod = getById_ShouldReturnUserById_WhenInputIsExistId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@294bdeb4 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7d151a, testMethod = getById_ShouldReturnUserById_WhenInputIsExistId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 71, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 72, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 73, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.getById_ShouldReturnUserById_WhenInputIsExistId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@5300f14a] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@5300f14a] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 47 ms.
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 16 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@5300f14a]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@5300f14a] after transaction
2021-11-05 13:02:27 DEBUG UserDAOImpl:74 - Call method getById() with id = 2000
2021-11-05 13:02:27 DEBUG JdbcTemplate:711 - Executing prepared SQL query
2021-11-05 13:02:27 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [SELECT * FROM users WHERE user_id = ?]
2021-11-05 13:02:27 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG UserDAOImpl:84 - User is User(id=2000, name=Dennis, surname=Yudin, email=dennisYudin@mail.ru, login=Big boss, password=0000, type=customer)
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@77bb0ab5 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7d151a, testMethod = getById_ShouldReturnUserById_WhenInputIsExistId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 74, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 75, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 76, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.getById_ShouldReturnUserById_WhenInputIsExistId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@f2c488] for JDBC transaction
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@f2c488] to manual commit
2021-11-05 13:02:27 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:27 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 0 ms.
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@f2c488]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@f2c488] after transaction
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7d151a, testMethod = getById_ShouldReturnUserById_WhenInputIsExistId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG DependencyInjectionTestExecutionListener:81 - Performing dependency injection for test context [[DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7bc9e6ab, testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 77, missCount = 1]
2021-11-05 13:02:27 DEBUG AbstractDirtiesContextTestExecutionListener:107 - Before test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7bc9e6ab, testMethod = delete_ShouldDeleteUserById_WhenInputIsId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@5488b5c5 dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [BEFORE_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7bc9e6ab, testMethod = delete_ShouldDeleteUserById_WhenInputIsId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 78, missCount = 1]
2021-11-05 13:02:27 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/createTables.sql], URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 79, missCount = 1]
2021-11-05 13:02:27 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:27 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 80, missCount = 1]
2021-11-05 13:02:27 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.delete_ShouldDeleteUserById_WhenInputIsId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:27 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@4248ed58] for JDBC transaction
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@4248ed58] to manual commit
2021-11-05 13:02:28 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/createTables.sql]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "locations" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE locations ( location_id SERIAL PRIMARY KEY, name VARCHAR(80) NOT NULL, working_hours VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, address VARCHAR(100) NOT NULL, description VARCHAR(150) NOT NULL, capacity_people INT NULL )
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events ( event_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, date TIMESTAMP WITH TIME ZONE, price INT NOT NULL, status VARCHAR(20) NOT NULL, description VARCHAR(1500) NOT NULL, location_id INT DEFAULT NULL, FOREIGN KEY (location_id) REFERENCES locations (location_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "categories" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE categories ( category_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL )
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "events_categories" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE events_categories ( event_id INT, category_id INT, PRIMARY KEY (event_id, category_id), FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE, FOREIGN KEY (category_id) REFERENCES categories (category_id) ON DELETE CASCADE )
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "users" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE users ( user_id SERIAL PRIMARY KEY, name VARCHAR(120) NOT NULL, surname VARCHAR(120) NOT NULL, email VARCHAR(60) NOT NULL, login VARCHAR(20) NOT NULL, password VARCHAR(120) NOT NULL, type VARCHAR(20) NOT NULL )
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "event_subscriptions" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE event_subscriptions ( user_id INT, event_id INT, PRIMARY KEY (user_id, event_id), FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE CASCADE )
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [таблица "tickets" не существует, пропускается]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: CREATE TABLE tickets ( ticket_id SERIAL PRIMARY KEY, event_name VARCHAR(80) NOT NULL, unique_number VARCHAR(10) NOT NULL, creation_date TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, user_id INT NOT NULL, event_id INT NOT NULL, FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE SET DEFAULT, FOREIGN KEY (event_id) REFERENCES events (event_id) ON DELETE SET DEFAULT )
2021-11-05 13:02:28 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/createTables.sql] in 57 ms.
2021-11-05 13:02:28 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (1, 'exhibition')
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (2, 'movie')
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (3, 'theatre')
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO categories (category_id, name) VALUES (4, 'Art concert')
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (100, 'Drunk oyster', '08:00-22:00', 'bar', 'FooBar street', 'description test', 300)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO locations (location_id, name, working_hours, type, address, description, capacity_people) VALUES (101, 'Moes', '06:00-00:00', 'tavern', 'the great street', 'description bla bla bla for test', 750)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1000, 'Oxxxymiron concert', '2021-08-13 18:23:00', 5000, 'actual', 'Oxxxymiron is', 101)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events (event_id, name, date, price, status, description, location_id) VALUES (1001, 'Basta', '2019-09-14 15:30:00', 1000, 'actual', 'Bla bla bla', 100)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 1)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 2)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1000, 3)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 3)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO events_categories (event_id, category_id) VALUES (1001, 2)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2000, 'Dennis', 'Yudin', 'dennisYudin@mail.ru', 'Big boss', '0000', 'customer')
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO users (user_id, name, surname, email, login, password, type) VALUES (2001, 'Mark', 'Batmanov', 'redDragon@mail.ru', 'HelloWorld', '1234', 'customer')
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1000)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2000, 1001)
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 1 returned as update count for SQL: INSERT INTO event_subscriptions (user_id, event_id) VALUES (2001, 1000)
2021-11-05 13:02:28 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/populateTablesWithoutTicketTable.sql] in 16 ms.
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@4248ed58]
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@4248ed58] after transaction
2021-11-05 13:02:28 DEBUG UserDAOImpl:215 - Call method delete()
2021-11-05 13:02:28 DEBUG JdbcTemplate:958 - Executing prepared SQL update
2021-11-05 13:02:28 DEBUG JdbcTemplate:643 - Executing prepared SQL statement [DELETE FROM users WHERE user_id = ?]
2021-11-05 13:02:28 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:28 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:28 DEBUG JdbcTemplate:440 - Executing SQL query [SELECT user_id FROM users]
2021-11-05 13:02:28 DEBUG DataSourceUtils:115 - Fetching JDBC Connection from DataSource
2021-11-05 13:02:28 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:28 DEBUG SqlScriptsTestExecutionListener:165 - Processing [MergedSqlConfig@4564e94b dataSource = '', transactionManager = '', transactionMode = INFERRED, encoding = '', separator = ';', commentPrefix = '--', blockCommentStartDelimiter = '/*', blockCommentEndDelimiter = '*/', errorMode = FAIL_ON_ERROR] for execution phase [AFTER_TEST_METHOD] and test context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7bc9e6ab, testMethod = delete_ShouldDeleteUserById_WhenInputIsId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]].
2021-11-05 13:02:28 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:28 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 81, missCount = 1]
2021-11-05 13:02:28 DEBUG SqlScriptsTestExecutionListener:190 - Executing SQL scripts: [URL [file:src/test/resources/cleanUpTables.sql]]
2021-11-05 13:02:28 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:28 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 82, missCount = 1]
2021-11-05 13:02:28 DEBUG DefaultCacheAwareContextLoaderDelegate:130 - Retrieved ApplicationContext from cache with key [[MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]
2021-11-05 13:02:28 DEBUG cache:294 - Spring test ApplicationContext cache statistics: [DefaultContextCache@6cea706c size = 1, maxSize = 32, parentContextCount = 0, hitCount = 83, missCount = 1]
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:370 - Creating new transaction with name [dev.andrylat.task2.dao.impl.UserDAOImplTest.delete_ShouldDeleteUserById_WhenInputIsId]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2021-11-05 13:02:28 DEBUG DriverManagerDataSource:144 - Creating new JDBC DriverManager Connection to [jdbc:postgresql://localhost:5432/eventholderdbtest]
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:267 - Acquired Connection [org.postgresql.jdbc.PgConnection@54534abf] for JDBC transaction
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:285 - Switching JDBC Connection [org.postgresql.jdbc.PgConnection@54534abf] to manual commit
2021-11-05 13:02:28 DEBUG ScriptUtils:572 - Executing SQL script from URL [file:src/test/resources/cleanUpTables.sql]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS locations CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_location_id_fkey в отношении таблица events]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 3 объекта]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS categories CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на объект ограничение events_categories_category_id_fkey в отношении таблица events_categories]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS events_categories CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS users CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:607 - SQLWarning ignored: SQL state '00000', error code '0', message [удаление распространяется на ещё 2 объекта]
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS event_subscriptions CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:604 - 0 returned as update count for SQL: DROP TABLE IF EXISTS tickets CASCADE
2021-11-05 13:02:28 DEBUG ScriptUtils:638 - Executed SQL script from URL [file:src/test/resources/cleanUpTables.sql] in 16 ms.
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:740 - Initiating transaction commit
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:330 - Committing JDBC transaction on Connection [org.postgresql.jdbc.PgConnection@54534abf]
2021-11-05 13:02:28 DEBUG DataSourceTransactionManager:389 - Releasing JDBC Connection [org.postgresql.jdbc.PgConnection@54534abf] after transaction
2021-11-05 13:02:28 DEBUG AbstractDirtiesContextTestExecutionListener:107 - After test method: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = dev.andrylat.task2.dao.impl.UserDAOImplTest@7bc9e6ab, testMethod = delete_ShouldDeleteUserById_WhenInputIsId@UserDAOImplTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null], method annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:28 DEBUG AbstractDirtiesContextTestExecutionListener:142 - After test class: context [DefaultTestContext@4808bc9b testClass = UserDAOImplTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@70e38ce1 testClass = UserDAOImplTest, locations = '{}', classes = '{class dev.andrylat.task2.configs.AppConfigTest}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].
2021-11-05 13:02:28 INFO  GenericApplicationContext:989 - Closing org.springframework.context.support.GenericApplicationContext@295cf707: startup date [Fri Nov 05 13:02:23 MSK 2021]; root of context hierarchy
2021-11-05 14:12:43 DEBUG CategoryServiceImpl:88 - Call method delete() with id = -1
2021-11-05 14:12:43 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = -1
2021-11-05 14:12:43 ERROR CategoryServiceImpl:53 - id can not be less or equals zero
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:75 - Call method saveCategory() for category with id = -1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = -1
2021-11-05 14:12:48 ERROR CategoryServiceImpl:53 - id can not be less or equals zero
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:59 - Call method findAll()
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:65 - Categories are [Category(id=4, title=Art concert), Category(id=1, title=exhibition), Category(id=2, title=movie), Category(id=3, title=theatre)]
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:59 - Call method findAll()
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:65 - Categories are [Category(id=1, title=exhibition), Category(id=2, title=movie), Category(id=3, title=theatre), Category(id=4, title=Art concert)]
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:59 - Call method findAll()
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:65 - Categories are [Category(id=4, title=Art concert), Category(id=1, title=exhibition)]
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:88 - Call method delete() with id = -1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = -1
2021-11-05 14:12:48 ERROR CategoryServiceImpl:53 - id can not be less or equals zero
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:88 - Call method delete() with id = 1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = 1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:94 - Category with id = 1 is deleted in DB
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:75 - Call method saveCategory() for category with id = 5
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = 5
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:30 - Call method getById() with id = 1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = 1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:38 - Category is Category(id=1, title=exhibition)
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:75 - Call method saveCategory() for category with id = 1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = 1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:59 - Call method findAll()
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:65 - Categories are [Category(id=1, title=exhibition), Category(id=2, title=movie), Category(id=3, title=theatre), Category(id=4, title=Art concert)]
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:30 - Call method getById() with id = -1
2021-11-05 14:12:48 DEBUG CategoryServiceImpl:51 - Call method validateId() with id = -1
2021-11-05 14:12:48 ERROR CategoryServiceImpl:53 - id can not be less or equals zero
2021-11-05 14:29:34 DEBUG EventServiceImpl:127 - Call method getAllCategoriesByEventId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:135 - Categories are [exhibition, movie, theatre]
2021-11-05 14:29:34 DEBUG EventServiceImpl:172 - Call method getEventWithDetails() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:50 - Call method getById() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:58 - Event is Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)
2021-11-05 14:29:34 DEBUG EventServiceImpl:127 - Call method getAllCategoriesByEventId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:135 - Categories are [exhibition, movie, theatre]
2021-11-05 14:29:34 DEBUG EventServiceImpl:189 - Call method getLocationById() with id = 101
2021-11-05 14:29:34 DEBUG EventServiceImpl:195 - Location is Location(id=101, title=Moes, workingHours=06:00-00:00, type=tavern, address=the great street, description=description bla bla bla for test, capacityPeople=750)
2021-11-05 14:29:34 DEBUG EventServiceImpl:183 - EventDTO is EventDTO(eventId=1000, eventName=Oxxxymiron concert, eventDate=Fri Aug 13 18:23:00 MSK 2021, eventPrice=5000, eventStatus=actual, eventDescription=Oxxxymiron is, eventCategories=[exhibition, movie, theatre], locationName=Moes, locationWorkingHours=06:00-00:00, locationType=tavern, locationAddress=the great street, locationDescription=description bla bla bla for test, capacityPeople=750)
2021-11-05 14:29:34 DEBUG EventServiceImpl:172 - Call method getEventWithDetails() with id = 125
2021-11-05 14:29:34 DEBUG EventServiceImpl:50 - Call method getById() with id = 125
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 125
2021-11-05 14:29:34 ERROR EventServiceImpl:62 - There is no such event with id = 125
2021-11-05 14:29:34 DEBUG EventServiceImpl:112 - Call method delete() with event id = -1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1000
2021-11-05 14:29:34 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:29:34 DEBUG EventServiceImpl:98 - Call method save() for event with id = 1002
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1002
2021-11-05 14:29:34 DEBUG EventServiceImpl:159 - Call method removeCategory() for event id = 1000 and category id = 1
2021-11-05 14:29:34 DEBUG EventServiceImpl:163 - Category with id = 1 is deleted in DB
2021-11-05 14:29:34 DEBUG EventServiceImpl:81 - Call method findAllEvents()
2021-11-05 14:29:34 DEBUG EventServiceImpl:87 - Events are [Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100), Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)]
2021-11-05 14:29:34 DEBUG EventServiceImpl:127 - Call method getAllCategoriesByEventId() with id = -1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1000
2021-11-05 14:29:34 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:29:34 DEBUG EventServiceImpl:81 - Call method findAllEvents()
2021-11-05 14:29:34 DEBUG EventServiceImpl:87 - Events are [Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101), Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100)]
2021-11-05 14:29:34 DEBUG EventServiceImpl:81 - Call method findAllEvents()
2021-11-05 14:29:34 DEBUG EventServiceImpl:87 - Events are [Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100), Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)]
2021-11-05 14:29:34 DEBUG EventServiceImpl:127 - Call method getAllCategoriesByEventId() with id = 125
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 125
2021-11-05 14:29:34 DEBUG EventServiceImpl:135 - Categories are []
2021-11-05 14:29:34 DEBUG EventServiceImpl:112 - Call method delete() with event id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:118 - Event with id = 1000 is deleted in DB
2021-11-05 14:29:34 DEBUG EventServiceImpl:172 - Call method getEventWithDetails() with id = -1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:50 - Call method getById() with id = -1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1000
2021-11-05 14:29:34 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:29:34 DEBUG EventServiceImpl:146 - Call method addNewCategory() for event id = 1001 and category id = 1
2021-11-05 14:29:34 DEBUG EventServiceImpl:150 - Category with id = 1 is added in DB
2021-11-05 14:29:34 DEBUG EventServiceImpl:50 - Call method getById() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:58 - Event is Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)
2021-11-05 14:29:34 DEBUG EventServiceImpl:50 - Call method getById() with id = -1
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1
2021-11-05 14:29:34 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:29:34 DEBUG EventServiceImpl:98 - Call method save() for event with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:29:34 DEBUG EventServiceImpl:81 - Call method findAllEvents()
2021-11-05 14:29:34 DEBUG EventServiceImpl:87 - Events are [Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100)]
2021-11-05 14:45:37 DEBUG EventServiceImpl:126 - Call method getAllCategoriesByEventId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:134 - Categories are [exhibition, movie, theatre]
2021-11-05 14:45:37 DEBUG EventServiceImpl:171 - Call method getEventWithDetails() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:50 - Call method getById() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:58 - Event is Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)
2021-11-05 14:45:37 DEBUG EventServiceImpl:126 - Call method getAllCategoriesByEventId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:134 - Categories are [exhibition, movie, theatre]
2021-11-05 14:45:37 DEBUG EventServiceImpl:188 - Call method getLocationById() with id = 101
2021-11-05 14:45:37 DEBUG EventServiceImpl:194 - Location is Location(id=101, title=Moes, workingHours=06:00-00:00, type=tavern, address=the great street, description=description bla bla bla for test, capacityPeople=750)
2021-11-05 14:45:37 DEBUG EventServiceImpl:182 - EventDTO is EventDTO(eventId=1000, eventName=Oxxxymiron concert, eventDate=Fri Aug 13 18:23:00 MSK 2021, eventPrice=5000, eventStatus=actual, eventDescription=Oxxxymiron is, eventCategories=[exhibition, movie, theatre], locationName=Moes, locationWorkingHours=06:00-00:00, locationType=tavern, locationAddress=the great street, locationDescription=description bla bla bla for test, capacityPeople=750)
2021-11-05 14:45:37 DEBUG EventServiceImpl:171 - Call method getEventWithDetails() with id = 125
2021-11-05 14:45:37 DEBUG EventServiceImpl:50 - Call method getById() with id = 125
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 125
2021-11-05 14:45:37 ERROR EventServiceImpl:62 - There is no such event with id = 125
2021-11-05 14:45:37 DEBUG EventServiceImpl:111 - Call method delete() with event id = -1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1000
2021-11-05 14:45:37 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:45:37 DEBUG EventServiceImpl:97 - Call method save() for event with id = 1002
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1002
2021-11-05 14:45:37 DEBUG EventServiceImpl:158 - Call method removeCategory() for event id = 1000 and category id = 1
2021-11-05 14:45:37 DEBUG EventServiceImpl:162 - Category with id = 1 is deleted in DB
2021-11-05 14:45:37 DEBUG EventServiceImpl:80 - Call method findAllEvents()
2021-11-05 14:45:37 DEBUG EventServiceImpl:86 - Events are [Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100), Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)]
2021-11-05 14:45:37 DEBUG EventServiceImpl:126 - Call method getAllCategoriesByEventId() with id = -1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1000
2021-11-05 14:45:37 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:45:37 DEBUG EventServiceImpl:80 - Call method findAllEvents()
2021-11-05 14:45:37 DEBUG EventServiceImpl:86 - Events are [Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101), Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100)]
2021-11-05 14:45:37 DEBUG EventServiceImpl:80 - Call method findAllEvents()
2021-11-05 14:45:37 DEBUG EventServiceImpl:86 - Events are [Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100), Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)]
2021-11-05 14:45:37 DEBUG EventServiceImpl:126 - Call method getAllCategoriesByEventId() with id = 125
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 125
2021-11-05 14:45:37 DEBUG EventServiceImpl:134 - Categories are []
2021-11-05 14:45:37 DEBUG EventServiceImpl:111 - Call method delete() with event id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:117 - Event with id = 1000 is deleted in DB
2021-11-05 14:45:37 DEBUG EventServiceImpl:171 - Call method getEventWithDetails() with id = -1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:50 - Call method getById() with id = -1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1000
2021-11-05 14:45:37 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:45:37 DEBUG EventServiceImpl:145 - Call method addNewCategory() for event id = 1001 and category id = 1
2021-11-05 14:45:37 DEBUG EventServiceImpl:149 - Category with id = 1 is added in DB
2021-11-05 14:45:37 DEBUG EventServiceImpl:50 - Call method getById() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:58 - Event is Event(id=1000, title=Oxxxymiron concert, date=Fri Aug 13 18:23:00 MSK 2021, price=5000, status=actual, description=Oxxxymiron is, locationId=101)
2021-11-05 14:45:37 DEBUG EventServiceImpl:50 - Call method getById() with id = -1
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = -1
2021-11-05 14:45:37 ERROR EventServiceImpl:73 - id can not be less or equals zero
2021-11-05 14:45:37 DEBUG EventServiceImpl:97 - Call method save() for event with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:71 - Call method validateId() with id = 1000
2021-11-05 14:45:37 DEBUG EventServiceImpl:80 - Call method findAllEvents()
2021-11-05 14:45:37 DEBUG EventServiceImpl:86 - Events are [Event(id=1001, title=Basta, date=Sat Sep 14 15:30:00 MSK 2019, price=1000, status=actual, description=Bla bla bla, locationId=100)]
2021-11-06 11:05:43 DEBUG LocationServiceImpl:31 - Call method getById() with id = 100
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = 100
2021-11-06 11:05:43 DEBUG LocationServiceImpl:39 - Location is Location(id=100, title=Drunk oyster, workingHours=08:00-22:00, type=bar, address=FooBar street, description=description test, capacityPeople=300)
2021-11-06 11:05:43 DEBUG LocationServiceImpl:78 - Call method save() for location with id = -102
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = -102
2021-11-06 11:05:43 ERROR LocationServiceImpl:54 - id can not be less or equals zero
2021-11-06 11:05:43 DEBUG LocationServiceImpl:61 - Call method findAll()
2021-11-06 11:05:43 DEBUG LocationServiceImpl:67 - Locations are [Location(id=100, title=Drunk oyster, workingHours=08:00-22:00, type=bar, address=FooBar street, description=description test, capacityPeople=300), Location(id=101, title=Moes, workingHours=06:00-00:00, type=tavern, address=the great street, description=description bla bla bla for test, capacityPeople=750)]
2021-11-06 11:05:43 DEBUG LocationServiceImpl:78 - Call method save() for location with id = 102
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = 102
2021-11-06 11:05:43 DEBUG LocationServiceImpl:92 - Call method delete() with id = -1
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = -1
2021-11-06 11:05:43 ERROR LocationServiceImpl:54 - id can not be less or equals zero
2021-11-06 11:05:43 DEBUG LocationServiceImpl:61 - Call method findAll()
2021-11-06 11:05:43 DEBUG LocationServiceImpl:67 - Locations are [Location(id=100, title=Drunk oyster, workingHours=08:00-22:00, type=bar, address=FooBar street, description=description test, capacityPeople=300)]
2021-11-06 11:05:43 DEBUG LocationServiceImpl:78 - Call method save() for location with id = 100
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = 100
2021-11-06 11:05:43 DEBUG LocationServiceImpl:61 - Call method findAll()
2021-11-06 11:05:43 DEBUG LocationServiceImpl:67 - Locations are [Location(id=100, title=Drunk oyster, workingHours=08:00-22:00, type=bar, address=FooBar street, description=description test, capacityPeople=300), Location(id=101, title=Moes, workingHours=06:00-00:00, type=tavern, address=the great street, description=description bla bla bla for test, capacityPeople=750)]
2021-11-06 11:05:43 DEBUG LocationServiceImpl:61 - Call method findAll()
2021-11-06 11:05:43 DEBUG LocationServiceImpl:67 - Locations are [Location(id=100, title=Drunk oyster, workingHours=08:00-22:00, type=bar, address=FooBar street, description=description test, capacityPeople=300), Location(id=101, title=Moes, workingHours=06:00-00:00, type=tavern, address=the great street, description=description bla bla bla for test, capacityPeople=750)]
2021-11-06 11:05:43 DEBUG LocationServiceImpl:31 - Call method getById() with id = -1
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = -1
2021-11-06 11:05:43 ERROR LocationServiceImpl:54 - id can not be less or equals zero
2021-11-06 11:05:43 DEBUG LocationServiceImpl:92 - Call method delete() with id = 100
2021-11-06 11:05:43 DEBUG LocationServiceImpl:52 - Call method validateId() with id = 100
2021-11-06 11:05:43 DEBUG LocationServiceImpl:98 - Location with id = 100 is deleted in DB
